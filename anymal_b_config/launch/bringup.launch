<launch>
    <arg name="robot_name"             default="/anymal_b"/>  <!-- Change this for namespacing. -->
    <arg name="joints_map_file"        default="$(find anymal_b_config)/config/joints.yaml"/> <!--Path to list of joint names. Do not touch this. -->
    <arg name="links_map_file"         default="$(find anymal_b_config)/config/links.yaml"/> <!-- Path to list of link names. Do not touch this. -->
    <arg name="gait_config_file"       default="$(find anymal_b_config)/config/gait.yaml"/>  <!-- Path to gait parameters. Do not touch this. -->
    <arg name="description_file"   default="$(find anymal_b_config)/urdf/anymal_b.urdf"/> <!-- Path to URDF file Do not touch this. -->
    <arg name="joint_controller_topic" default="joint_group_position_controller/command" /> <!-- Change to remap command topic for actuator controller (ROS control).  -->

    <!-- ==================== 1) Get robot description for CHAMP ==================== -->
    <group ns="$(arg robot_name)">
        <param name="robot_description" command="$(find xacro)/xacro --inorder '$(arg description_file)'"/>
    </group>

    <group ns="$(arg robot_name)">
        <!-- ==================== 2) LOAD PARAMETERS ==================== -->
        <param name="tf_prefix" value="$(arg robot_name)"/>
        <rosparam command="load" ns="gait"       file="$(arg gait_config_file)" />
        <rosparam command="load" ns="links_map"  file="$(arg links_map_file)" />
        <rosparam command="load" ns="joints_map" file="$(arg joints_map_file)" />
 
        <!-- ==================== 3) CONTROLLER ==================== -->
        <node pkg="champ_base" name="champ_controller" type="quadruped_controller_node">
            <param name="gazebo"                 value="false" />
            <param name="publish_joint_states"   value="true" />
            <param name="publish_foot_contacts"  value="true" />
            <param name="publish_joint_control"  value="true" />
            <param name="joint_controller_topic" value="$(arg joint_controller_topic)" />
        </node>
        
        <!-- ==================== 3) Teleop ==================== -->
        <include file="$(find champ_teleop)/launch/teleop.launch"/>

    </group>
  
</launch>